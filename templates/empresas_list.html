{% extends "base.html" %}

{% block title %}Gestión de Empresas{% endblock %}

{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h1 class="h4 mb-0">Gestión de Empresas</h1>
  <a href="{{ url_for('empresa_new') }}" class="btn btn-primary btn-sm">Nueva Empresa</a>
</div>

<div class="alert alert-info">
  <small>ℹ️ Zona exclusiva para Superadministradores.</small>
</div>

<table class="table table-striped table-hover align-middle">
  <thead class="table-dark">
    <tr>
      <th>ID</th>
      <th>Nombre Comercial</th>
      <th>CIF</th>
      <th class="text-end" style="width: 150px;">Acciones</th>
    </tr>
  </thead>
  <tbody>
    {% for empresa in empresas %}
      <tr>
        <td>{{ empresa.id_empresa }}</td>
        <td><strong>{{ empresa.nombrecomercial }}</strong></td>
        <td>{{ empresa.cif }}</td>
        <td class="text-end">
          {# Formulario para el botón eliminar #}
          <form action="{{ url_for('empresa_delete', empresa_id=empresa.id_empresa) }}" method="post" style="display:inline;">
            <button type="submit" class="btn btn-sm btn-outline-danger" onclick="return confirm('¿Seguro que quieres eliminar la empresa {{ empresa.nombrecomercial }}? Esta acción no se puede deshacer.');">
              Eliminar
            </button>
          </form>
        </td>
      </tr>
    {% else %}
      <tr>
        <td colspan="4" class="text-center text-muted py-3">
          No hay empresas registradas en el sistema.
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>

<div class="mt-3">
  <a href="{{ url_for('panel') }}" class="btn btn-outline-secondary btn-sm">Volver al Panel</a>
</div>
{% endblock %}